<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Perlin Text</title>
    <style>
      .centerbox {
        display: box;
        box-orient: vertical;
        box-pack: center;
        box-align: center;

        width: 100%;
        height: 100%;
        margin: 0;
        height: 0%;
      }

      body,
      html {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
      }

      canvas {
        box-shadow: 0 0 10px #777;
      }

      body {
        background-color: #eee;
      }
      h1 {
        position: absolute;
        font-size: 10em;
        font-family: "Century Gothic", sans-serif;
        top: 40%;
        left: 10%;
        color: white;
      }
    </style>
  </head>
  <body>
    <div class="centerbox">
      <canvas></canvas>
    </div>
    <h1>Welcome.</h1>
    <script src="https://josephg.com/perlin/3/perlin.js"></script>

    <script>
      // Generated by CoffeeScript 1.3.3
      var TAU,
        button,
        canvas,
        ctx,
        draw,
        f,
        fpselem,
        h,
        p1,
        particles,
        period,
        raf,
        w,
        _i;

      canvas = document.getElementsByTagName("canvas")[0];

      w = canvas.width = 1440;

      h = canvas.height = 900;

      TAU = 2 * Math.PI;

      ctx = canvas.getContext("2d");

      period = 1 / 800;

      ctx.fillStyle = "white";

      ctx.fillRect(0, 0, w, h);

      ctx.fillStyle = "rgba(1,1,1,0.3)";

      noise.seed(Math.random());

      particles = [];

      for (_i = 1; _i <= 2000; _i++) {
        p1 = {
          x: Math.random() * w,
          y: h / 2 + Math.random() * 50,
          a: 0,
        };
        particles.push(p1);
        particles.push({
          x: p1.x,
          y: p1.y,
          a: TAU / 2,
        });
      }

      draw = function () {
        var a, p, v, _j, _len, _results;
        _results = [];
        for (_j = 0, _len = particles.length; _j < _len; _j++) {
          p = particles[_j];
          v = noise.perlin2(p.x * period, p.y * period);
          ctx.fillStyle = "hsla(" + Math.floor(v * 360) + ", 95%, 20%, 0.05)";
          ctx.fillRect(p.x, p.y, 2, 2);
          p.h++;
          a = v * 2 * Math.PI + p.a;
          p.x += Math.cos(a);
          _results.push((p.y += Math.sin(a)));
        }
        return _results;
      };

      raf =
        window.requestAnimationFrame ||
        window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function (callback) {
          return window.setTimeout(callback, 1000 / 60);
        };

      f = function () {
        raf(f);
        return draw();
      };

      raf(f);
    </script>
  </body>
</html>
